---
title: "Analise de Crédito - Machine Learning"
author: "Michel H S Nascimento"
date: "2 de fevereiro de 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Conhecendo os dados

Este documento trata de um estudo sobre machine learning, através da execução de exercícios de um curso de ML da Udemy que visa analisar a disponibilidade de crédito das pessoas através de um conjunto de dados.

A biblioteca usada para o algoritmo de ML foi a "e1071".

```{r includes}
#install.packages("e1071")
library(e1071)
```

Importando os dados de créditos:

```{r import}
dados_creditos = read.csv(file.choose())

head(dados_creditos)
```

Pode perceber no conjunto de dados as características de todas as intâncias na massa de dados, onde seu atributo final referente a classe descreve se tal instância é tido como um bom ou mal pagador.

## Criando Amostras

Para uma análise mais adequada de resultados para posteriormente colocá-los em produção com uma certa confiança, se faz necessário a divisão dos dados em amostras para testes e para treino:

```{r testeetreino}
amostras = sample(2, 1000, replace = T, prob = c(0.7,0.3))
amostras
dados_treino = dados_creditos[amostras==1,]
dados_teste = dados_creditos[amostras==2,]
```

## Criação do Modelo

Cria-se o modelo para análise dos dados, este é feito com base na função da biblioteca que foi carregada, neste caso naivebayes; Tal modelo permite identificar relações de proporcionalidade entre os atributos definidos na massa de dados:

```{r modelo}
modelo = naiveBayes(class ~., dados_treino)
modelo
```
## Previsão
Usa-se o modelo obtido para a análise preditiva sobre a parcela de dados reservadas para o teste, assim os valores podem ser confrontados de modo que se possa verificar a confiança do modelo:

```{r previsão}
previsao = predict(modelo, dados_teste)
previsao
```

Matriz Confusão


```{r confusao}
matriz_confusao = table(dados_teste$class, previsao)
matriz_confusao

#taxa de acerto
taxa = (matriz_confusao[1]+matriz_confusao[4])/sum(matriz_confusao)
taxa
```
## Deployment

Faz-se a análise a partir de um arquivo externo de possíveis novas buscas por crédito com o modelo produzido:

```{r deplyment}
novos_dados = read.csv(file.choose())
previsao_deployment = predict(modelo, novos_dados)
previsao_deployment
```